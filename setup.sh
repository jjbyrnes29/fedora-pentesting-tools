#!/bin/bash
version=2.0.0
OPTIONS=(
    "00" "Update System" off
    "01" "Blue Team Tools" off
    "02" "Privacy Tools" off
    "03" "Pentesting Frameworks" off
    "04" "Recon Tools" off
    "05" "802.11 Pentesting Tools" off
    "06" "Injections/Escalations" off
    "07" "Social Engineering Tools / Stenography" off
    "08" "Reverse Engineering Tools" off
    "09" "Password Cracking Tools" off
    "10" "Wordlists" off
)
TOOLS=(
    "1-1" "Fail2Ban" off
    "1-2" "ChkRootkit" off
    "1-3" "RKHunter" off
    "1-4" "ClamAV" off
    "1-5" "KeePassXC" off
    "2-1" "ProxyChains4" off
    "2-2" "The Onion Router" off
    "2-3" "The Onion Router Browser" off
    "2-4" "MacChanger" off
    "2-5" "Ligolo-ng" off
    "2-6" "Wireguard" off
    "3-1" "MetaSploit" off
    "3-2" "RouterSploit" off
    "3-3" "ExploitDB/SearchSploit" off
    "4-1" "NMap" off
    "4-2" "WireShark" off
    "4-3" "DirSearch" off
    "4-4" "GoBuster" off
    "4-5" "AutoRecon" off
    "4-6" "WhatWeb" off
    "4-7" "FeroxBuster" off
    "4-8" "DnsRecon" off
    "4-9" "Nikto" off
    "5-1" "WireShark" off
    "5-2" "AirCrack-ng Suite" off
    "5-3" "HXCTools Suite" off
    "5-4" "MDK4" off
    "5-5" "BetterCap" off
    "5-6" "Scapy" off
    "5-7" "DSniff" off
    "5-8" "Arp-Scan" off
    "6-1" "WebShells" off
    "6-2" "Neo-ReGeorg Tunnels" off
    "6-3" "Mimikatz" off
    "6-4" "PEASS-ng Scripts" off
    "6-5" "Responder" off
    "7-1" "StegSeek" off
    "7-2" "ZBarImg" off
    "7-3" "QREncode" off
    "7-4" "Social Engineering Toolkit" off
    "7-5" "Morse2Ascii" off
    "7-6" "TheHarvester" off
    "7-7" "CyberChef" off
    "8-1" "LevelDBDumper" off
    "8-2" "Ghidra" off
    "8-3" "SqliteBrowser" off
    "8-4" "BinWalk" off
    "8-5" "SqlMap" off
    "8-6" "SqlNinja" off
    "9-1" "HashCat" off
    "9-2" "John" off
    "10-1" "SecList Wordlists" off
    "10-2" "Crunch" off
    "10-3" "Adj Noun Wordlist Generator" off
)
skip=0
trap ctrl_c INT
ctrl_c () {
      ((skip+=1))
      [[ $skip -ge 2 ]] && clear && exit 1
      dialog --title "NOTICE" --msgbox "\nInstallation aborted by User." 7 35
      clear
      exit 1
}
[[ "$EUID" -ne 0 ]] && echo "Please run as root." && exit 1
ping -q -c 1 "$(ip r | grep default | cut -d ' ' -f 3)" >/dev/null && cont=true || cont=false
[[ $cont == false ]] && echo "Internet Access is required to run this script." && exit 1
newver=$(curl -s https://raw.githubusercontent.com/jjbyrnes29/fedora-pentesting-tools/main/setup.sh | grep "version=" | head -1)
[[ ! "$newver" = "version=$version" ]] && echo "Script is Outdated!" && exit 1
sudo dnf install -y dialog >/dev/null
dialog --title "NOTICE" --msgbox "\nThis script installs security tools for Fedora Linux.\nIf you need drivers, this script does not cover them.\nPlease install all required drivers before running this script." 10 70
while :
do
  output=$(dialog --stdout --separate-output --ok-label "Write" --extra-button --extra-label "Install Manually" --checklist "\nChoose options to install:" 20 60 15 "${OPTIONS[@]}")
  exit_code=$?
  case $exit_code in
    0)
      clear
      for item in $output; do
        case $item in
          00) [[ ! $toinst = "00," ]] && toinst+="00,";;
          01) [[ ! $toinst = "01," ]] && toinst+="01,";;
          02) [[ ! $toinst = "02," ]] && toinst+="02,";;
          03) [[ ! $toinst = "03," ]] && toinst+="03,";;
          04) [[ ! $toinst = "04," ]] && toinst+="04,";;
          05) [[ ! $toinst = "05," ]] && toinst+="05,";;
          06) [[ ! $toinst = "06," ]] && toinst+="06,";;
          07) [[ ! $toinst = "07," ]] && toinst+="07,";;
          08) [[ ! $toinst = "08," ]] && toinst+="08,";;
          09) [[ ! $toinst = "09," ]] && toinst+="09,";;
          10) [[ ! $toinst = "10," ]] && toinst+="10,";;
        esac
      done
      cd /tmp
      wget https://raw.githubusercontent/jjbyrnes29/fedora-pentesting-tools/main/installer.sh
      chmod +x installer.sh
      ./installer.sh $toinst > /dev/null 2>&1
      rm installer.sh
      exit 0
      ;;
    3)
      clear
      dialog --title "NOTICE" --msgbox "Numbers Before Dash Indicate Package Grouping" 10 60
      output=$(dialog --stdout --separate-output --ok-label "Write" --cancel-label "Back" --checklist "Choose options to install:" 20 60 15 "${TOOLS[@]}")
      exit_code=$?
      case $exit_code in
        0)
          clear
          for item in $output; do
            case $item in
              "1-1") [[ ! $toinst = "11," ]] && toinst+="11,";;
              "1-2") [[ ! $toinst = "12," ]] && toinst+="12,";;
              "1-3") [[ ! $toinst = "13," ]] && toinst+="13,";;
              "1-4") [[ ! $toinst = "14," ]] && toinst+="14,";;
              "1-5") [[ ! $toinst = "15," ]] && toinst+="15,";;
              "2-1") [[ ! $toinst = "21," ]] && toinst+="21,";;
              "2-2") [[ ! $toinst = "22," ]] && toinst+="22,";;
              "2-3") [[ ! $toinst = "23," ]] && toinst+="23,";;
              "2-4") [[ ! $toinst = "24," ]] && toinst+="24,";;
              "2-5") [[ ! $toinst = "25," ]] && toinst+="25,";;
              "2-6") [[ ! $toinst = "26," ]] && toinst+="26,";;
              "3-1") [[ ! $toinst = "31," ]] && toinst+="31,";;
              "3-2") [[ ! $toinst = "32," ]] && toinst+="32,";;
              "3-3") [[ ! $toinst = "33," ]] && toinst+="33,";;
              "4-1") [[ ! $toinst = "41," ]] && toinst+="41,";;
              "4-2") [[ ! $toinst = "42," ]] && toinst+="42,";;
              "4-3") [[ ! $toinst = "43," ]] && toinst+="43,";;
              "4-4") [[ ! $toinst = "44," ]] && toinst+="44,";;
              "4-5") [[ ! $toinst = "45," ]] && toinst+="45,";;
              "4-6") [[ ! $toinst = "46," ]] && toinst+="46,";;
              "4-7") [[ ! $toinst = "47," ]] && toinst+="47,";;
              "4-8") [[ ! $toinst = "48," ]] && toinst+="48,";;
              "4-9") [[ ! $toinst = "49," ]] && toinst+="49,";;
              "5-1") [[ ! $toinst = "51," ]] && toinst+="51,";;
              "5-2") [[ ! $toinst = "52," ]] && toinst+="52,";;
              "5-3") [[ ! $toinst = "53," ]] && toinst+="53,";;
              "5-4") [[ ! $toinst = "54," ]] && toinst+="54,";;
              "5-5") [[ ! $toinst = "55," ]] && toinst+="55,";;
              "5-6") [[ ! $toinst = "56," ]] && toinst+="56,";;
              "5-7") [[ ! $toinst = "57," ]] && toinst+="57,";;
              "5-8") [[ ! $toinst = "58," ]] && toinst+="58,";;
              "6-1") [[ ! $toinst = "61," ]] && toinst+="61,";;
              "6-2") [[ ! $toinst = "62," ]] && toinst+="62,";;
              "6-3") [[ ! $toinst = "63," ]] && toinst+="63,";;
              "6-4") [[ ! $toinst = "64," ]] && toinst+="64,";;
              "6-5") [[ ! $toinst = "65," ]] && toinst+="65,";;
              "6-6") [[ ! $toinst = "66," ]] && toinst+="66,";;
              "7-1") [[ ! $toinst = "71," ]] && toinst+="71,";;
              "7-2") [[ ! $toinst = "72," ]] && toinst+="72,";;
              "7-3") [[ ! $toinst = "73," ]] && toinst+="73,";;
              "7-4") [[ ! $toinst = "74," ]] && toinst+="74,";;
              "7-5") [[ ! $toinst = "75," ]] && toinst+="75,";;
              "7-6") [[ ! $toinst = "76," ]] && toinst+="76,";;
              "7-7") [[ ! $toinst = "77," ]] && toinst+="77,";;
              "8-1") [[ ! $toinst = "81," ]] && toinst+="81,";;
              "8-2") [[ ! $toinst = "82," ]] && toinst+="82,";;
              "8-3") [[ ! $toinst = "83," ]] && toinst+="83,";;
              "8-4") [[ ! $toinst = "84," ]] && toinst+="84,";;
              "8-5") [[ ! $toinst = "85," ]] && toinst+="85,";;
              "8-6") [[ ! $toinst = "86," ]] && toinst+="86,";;
              "9-1") [[ ! $toinst = "91," ]] && toinst+="91,";;
              "9-2") [[ ! $toinst = "92," ]] && toinst+="92,";;
              "10-1") [[ ! $toinst = "101," ]] && toinst+="101,";;
              "10-2") [[ ! $toinst = "102," ]] && toinst+="102,";;
              "10-3") [[ ! $toinst = "103," ]] && toinst+="103,";;
            esac
          done
          cd /tmp
          wget https://raw.githubusercontent/jjbyrnes29/fedora-pentesting-tools/main/installer.sh
          chmod +x installer.sh
          ./installer.sh $toinst > /dev/null 2>&1
          rm installer.sh
          exit 0
        ;;
      1)
        ;;
      esac
      ;;
    1 | 255)
      dialog --title "NOTICE" --msgbox "\nInstallation aborted by User." 7 35
      clear
      exit 1
      ;;
  esac
done
